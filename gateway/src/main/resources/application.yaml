server:
  port: 7777

spring:
  config:
    import: "optional:classpath:default.yaml"
  application:
    name: gateway
  data:
    redis:
      host: redis
      port: 6379
  cloud:
    gateway:
      routes:
        - id: user
          uri: http://user:5555
          predicates:
            - Path=/user/**
        - id: practice
          uri: http://practice:2222
          predicates:
            - Path=/practice/**
        - id: contest
          uri: http://contest:1234
          predicates:
            - Path=/contest/**
        - id: sys
          uri: http://sys:2121
          predicates:
            - Path=/sys/**
        - id: advice
          uri: http://advice:9999
          predicates:
            - Path=/advice/**
      globalcors:
        cors-configurations:
          '[/**]':
            allowedMethods: "*"
            allowedHeaders: "*"
            allowedOriginPatterns: "*"
            allowCredentials: true
      default-filters:
        - DedupeResponseHeader=Vary Access-Control-Allow-Origin Access-Control-Allow-Credentials, RETAIN_FIRST

#logging:
#  level:
#    org.springframework.cloud.gateway: DEBUG
#    org.springframework.web.cors: DEBUG

auth:
  service:
    url: http://user:5555
    on: false

